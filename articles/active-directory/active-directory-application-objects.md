<properties
   pageTitle="應用程式物件和服務主體物件 | Microsoft Azure"
   description="Azure Active Directory 中 Application 物件與 ServicePrincipal 物件間的關聯性討論"
   documentationCenter="dev-center-name"
   authors="msmbaldwin"
   manager="mbaldwin"
   services="active-directory"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="09/17/2015"
   ms.author="mbaldwin"/>


# 應用程式物件和服務主體物件

此圖說明應用程式物件和呼叫的範例應用程式的內容中的 ServicePrincipal 物件之間的關係 **HR app**。 有三個租用戶 ︰ **Adatum**, ，開發應用程式，租用戶和 **Contoso** 和 **Fabrikam**, ，可取用的租用戶 **HR app**。

![Application 物件和 ServicePrincipal 物件之間的關聯性](./media/active-directory-application-objects/application-objects-relationship.png)


當您在 Azure 管理入口網站中註冊應用程式時，系統會在您的目錄租用戶中建立兩個物件：

- **應用程式物件**︰ 此物件代表您的應用程式的定義。 您可以找到其屬性中的詳細的說明 **應用程式物件** 下一節。

- **ServicePrincipal 物件**︰ 此物件代表您目錄租用戶中應用程式的執行個體。 您可以將原則套用到 ServicePrincipal 物件，包括指派權限給 ServicePrincipal，讓應用程式能夠讀取您租用戶的目錄資料。 每當您變更 Application 物件時，所做的變更也會套用到您租用戶中相關聯的 ServicePrincipal 物件上。


> [AZURE.NOTE] 如果您的應用程式設定為外部存取，應用程式物件的變更才會反映在取用者租用戶的 ServicePrincipal 取用者租用戶移除存取並再次授與存取權。



上圖的步驟 "1" 是建立 Application 和 ServicePrincipal 物件的流程。

在步驟 2 中，當公司的系統管理員授與存取權時，系統就會在公司的 Azure AD 租用戶中建立 ServicePrincipal 物件，並對物件指派公司的系統管理員所授與的目錄存取層級。

在步驟 3 中，應用程式的取用者租用戶 (例如 Contoso 和 Fabrikam) 都有自己的 ServicePrincipal 物件，以代表它們的應用程式執行個體。 在此範例中，它們都各自具有代表 HR app 的 ServicePrincipal。





## Application 物件屬性

下表列出 Application 物件的所有屬性，並包含適用於開發人員的重要詳細資料。 這些屬性會套用到已向 Azure AD 註冊的 Web 應用程式、Web API 和原生用戶端應用程式。


### 一般

屬性 | 說明
| ------------- | -----------
| 名稱 | 應用程式的顯示名稱。 中的必要屬性 **新增應用程式** 精靈。
| 標誌 | 代表您應用程式或公司的應用程式標誌。 此標誌可讓外部使用者更容易將授與存取權要求與您的應用程式產生關聯。 當上傳標誌，請遵循中的規格 **上傳標誌** 精靈。 如果您沒有提供標誌，就會出現預設標誌。
| 外部存取 | 決定是否允許外部組織的使用者授與他人權限，以使用您的應用程式單一登入，以及存取其組織目錄中的資料。 此控制項只會影響授與存取權的能力， 不會變更已授與的存取權。 只有公司的系統管理員才可以授與存取權。


### 單一登入

屬性 | 說明
| ------------- | -----------
| 應用程式識別碼 URI | 應用程式的唯一邏輯識別碼。 中的必要屬性 **新增應用程式** 精靈。 <br><br>應用程式識別碼 URI 是邏輯識別碼，因為它不需要解析網際網路位址。 傳送單一登入要求至 Azure AD 時，您的應用程式會提供此識別碼。 Azure AD 會識別您的應用程式，並將登入回應 (SAML 權杖) 傳送至應用程式註冊期間所提供的回覆 URL。 提出登入要求時，請使用「應用程式識別碼 URI」的值設定 Wtrealm 屬性 (用於 WS 同盟) 或 Issuer 屬性 (用於 SAML-P)。  **應用程式識別碼 URI** 必須是唯一的值，在貴組織的 Azure AD。<br><br>**請注意**︰ 時啟用外部使用者的應用程式，應用程式的應用程式識別碼 URI 的值必須是其中一個目錄的已驗證的網域中的位址。 因此，此值不可為 URN。 這個保護措施可防止其他組織指定 (及使用) 屬於您組織的唯一屬性。 在開發期間，您可以將應用程式識別碼 URI 變更為組織初始網域中的位置 (如果您還沒有驗證自訂/虛名網域)，並更新應用程式以使用這個新的值。 初始網域是您在註冊時建立的 3 層級網域，例如 contoso.onmicrosoft.com。
| 應用程式 URL | 讓使用者可以登入及使用您應用程式的網頁位址。 中的必要屬性 **新增應用程式** 精靈。<br><BR>**請注意**︰ 在 [新增應用程式精靈的這個屬性也會設為 [回覆 URL 」 的值設定的值。
| 回覆 URL | 應用程式的實體位址。 Azure AD 會將權杖連同單一登入回應一併傳送到此位址。 在第一次註冊期間 **新增應用程式** 精靈、 應用程式的 URL 也會設為 「 回覆 URL 值的值。 當提出登入要求，使用 [回覆 URL] 值設定 wreply 屬性 （用於 WS-同盟） 或 **AssertionConsumerServiceURL** 屬性 （用於 SAML-P)。<br><BR>**請注意**︰ 啟用時的外部使用者的應用程式，回覆 URL 必須是 **https://** 位址。
| 同盟中繼資料 URL | (選擇性)。 代表應用程式之同盟中繼資料文件的實體 URL。 必須有此屬性才能支援 SAML-P 登出。 Azure AD 會下載位於此端點的中繼資料文件，並使用它來探索憑證的公用部分 (您將其用來驗證登出要求和應用程式登出 URL 上的簽章)。 當您第一次新增應用程式時，無法設定此屬性。 這可以只之後進行設定。<br><BR>**請注意**︰ 如果您需要支援 SAML-P 登出，但您的應用程式沒有同盟中繼資料端點，請連絡客戶支援部門取得其他選項。


### 呼叫 Graph API 或 Web API

屬性 | 說明
| ------------- | -----------
| 用戶端識別碼 | 應用程式的唯一識別碼。 呼叫已向 Azure AD 註冊的 Graph API 或其他 Web API 時必須使用此識別碼。 Azure AD 應用程式註冊期間自動產生此值，就無法變更。<BR><BR>若要啟用您的應用程式透過 Graph API 來存取目錄 （讀取或寫入權限），您需要用戶端識別碼和金鑰 （在用戶端密碼 OAuth 2.0 中稱為）。 您的應用程式會使用用戶端識別碼和金鑰，從 Azure AD OAuth 2.0 權杖端點要求存取權杖 (若要檢視所有的 Azure AD 端點，請在命令列中，按一下 [ **檢視端點**。)使用 Graph API 來取得或設定 (變更) 目錄資料時，您的應用程式會在 Graph API 要求的授權標頭中使用此存取權杖。
| 金鑰 | 如果您的應用程式會在 Azure AD 中讀取或寫入資料 (例如可透過 Graph API 取得的資料)，應用程式便需要金鑰。 當您要求存取權杖以呼叫 Graph API 時，您的應用程式會提供其 **用戶端識別碼** 和 **金鑰**。 權杖端點會先使用識別碼和金鑰來驗證您的應用程式，再核發存取權杖。 您可以建立多組金鑰來處理金鑰變換的情況。 此外，您也可以刪除過期、已遭洩露或不再使用的金鑰。
| 管理存取權 | 在三種不同的存取層級中選擇其中一種：單一登入 (SSO)、SSO 和讀取目錄資料，或是 SSO 和讀/寫目錄資料。 您也可以移除存取權。 <br><BR>**請注意**︰ 應用程式的目錄存取層級變更套用至您的目錄。 此變更不會套用至已獲得應用程式存取權的客戶。


### 原生用戶端

屬性 | 說明
| ------------- | -----------
| 重新導向 URI | Azure AD 會將使用者代理程式重新導向至此 URI，以回應 OAuth 2.0 授權要求。 此值不必是實體端點，但必須是有效的 URI。

##



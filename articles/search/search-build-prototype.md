<properties 
    pageTitle="建置 Azure 搜尋服務的原型應用程式 | Microsoft Azure | 雲端託管搜尋服務" 
    description="建立您的第一個應用程式原型來開始使用 Azure 搜尋服務 (託管的雲端搜尋服務)。" 
    services="search" 
    documentationCenter="" 
    authors="HeidiSteen" 
    manager="mblythe" 
    editor=""/>

<tags 
    ms.service="search" 
    ms.devlang="rest-api" 
    ms.workload="search" 
    ms.topic="article" 
    ms.tgt_pltfrm="na" 
    ms.date="11/04/2015" 
    ms.author="heidist"/>


# 建置 Azure 搜尋服務的原型應用程式

針對託管的雲端搜尋評估 Azure 搜尋服務的開發人員幾乎一開始都使用初步測試應用程式，示範將 Azure 搜尋服務加至入自訂應用程式的價值。
在本文中，我們提供您幾個建置組塊，加速原型程序的設計。

- 包含 data.json 和 schema.json 檔案的 Visual studio C# 專案。 具有範例資料，可讓您立即建置並執行方案，以在您撰寫一行程式碼之前，確認方案適用於您的系統。

    可能的話，請嘗試以您的商務資料取代這些獨立、中斷連線的結構描述和資料檔案。 然後，當您執行應用程式時，根據您的結構描述所建立的索引，以及根據您的資料檔案的文件，將立即可在 Azure 搜尋服務中使用。

- 如何建構您將上傳到 Azure 搜尋服務之資料的相關指引。 您需要一個資料集的每個索引。 Azure 搜尋服務會使用 JSON 進行資料序列化。

- 然後，將指向一些額外功能，它們可將您的原型帶至下一個層級 (包含搜尋特定功能，例如多面向導覽、調整結果、自動提示或自動完成之查詢的設定檔)，以及搜尋無法在嚴格的全文檢索搜尋替代方案中使用的頁面相關功能。

最後，您將具有一個使用您資料的原型應用程式，以使用 Azure 搜尋服務來示範健全的搜尋體驗。

## 準備資料

搜尋作業是針對您在 Azure 搜尋服務建立的搜尋索引而執行的。 索引具有多個部分，包括計分設定檔和建議，但是大量索引由搜尋作業中使用的資料欄位所組成。

提供欄位的資料集應該是一般資料檔 (在 JSON)，其中資料集中的每個欄位會對應至索引中您想要填入資料的對等欄位。 索引中的其他部分 (例如計分設定檔或 CORS 選項) 會直接在結構描述中個別加入。

本來使用 JSON 的資料來源 (例如 Azure 資料表儲存體)，將會提供比關聯式資料更易使用的資料，因此您將需要單一檢視或提供資料列集中所有欄位的資料表。

若要在原型範例應用程式中使用程式碼來上傳資料和結構描述檔案，您可以覆寫內嵌在方案中的預設結構描述和資料檔案。
> [AZURE.NOTE] 您可以載入多個資料檔案，也許用來批次上傳資料，但是對於您上傳至相同索引的每個資料檔案，資料的結構必須相同。 您無法加入索引；每個索引做為獨立搜尋主體運作。

## 在您的系統上測試原型方案

1. [Azure 傳統入口網站中建立 Azure 搜尋服務](search-create-service-portal.md)。

    您可以將共用 (免費) 版本的服務加入至任何現有的 Azure 訂用帳戶。 共用的服務通常用於原型。 請記住共用的服務總計可提供 50 MB 的資料或 10,000 份文件，看哪一個先到。 此外，資料與文件最多可以分散到 3 個索引。

    搭配內建的範例資料檔案執行原型範例應用程式，將建立在名為 "musicstoreindex" 的索引中，其中包含 246 份文件，在您的 Azure 搜尋服務上共計 278 KB。 稍後在本逐步解說中，您將以新的索引 (使用將耗用最多 ## 份文件和 ## MB 的 Adventure Works 資料) 取代這個索引。

2. [下載原型產生器方案](http://go.microsoft.com/fwlink/p/?LinkId=536479)。 這是 C# 中的 Visual Studio 2013 方案，其可建置用來建立、載入及查詢索引的主控台應用程式。 如果您沒有 Visual Studio，您可以取得免費 [Visual Studio 2013 Express 版](http://www.visualstudio.com/products/visual-studio-express-vs.aspx) 版本。

3. 編輯 app.config，加入以您的搜尋服務與 API 金鑰為目標的組態設定。

    您可以取得 URL 和管理員 api 金鑰從 [入口網站中的服務儀表板](search-create-service-portal.md)。 對於 URL，請輸入服務名稱，包括 https 前置詞的完整路徑和 `.search.windows.net` 網域。

4. 建置方案，以確保沒有發生任何建置錯誤。 您可能需要更新封裝以解決建置錯誤。 在方案上以滑鼠右鍵按一下 [**管理 NuGet 封裝**] 來更新封裝。

5. 使用內建的結構描述和資料檔案來執行方案。 這是選用步驟，但它可在您投入任何時間來新增您自己的資料之前確認方案可以運作。 主控台會輸出下列訊息：

    - 已刪除索引 (只在名稱 "musicstoreindex" 的索引存在時，才會發生)
    - 已建立索引 (已在您的服務中建立名為 "musicstoreindex" 的新索引)
    - 已張貼文件 (每個 JSON 檔案都有一則訊息)
    - 等待 5 秒 (允許在發出第一個查詢之前完成編製索引)
    - 未搭配提升之搜尋詞彙 'best' 的搜尋結果 (執行簡單查詢，證明索引中已載入資料)

6. 停止應用程式並刪除索引，以騰出空間供您使用。
    > [AZURE.TIP] 您可以使用 [入口網站](https://portal.azure.com) 來刪除索引。 按一下索引名稱，以開啟索引刀鋒視窗，並使用 [**刪除**] 命令。

## 以您的資料取代結構描述和資料 JSON 檔案

在原型方案中，有一個結構描述檔案和三個資料檔案：data1.json、data2.json 和 data3.json。 結構描述檔案 (schema.json) 應該取代為描述您資料的結構描述。

根據預設，這些檔案位於方案資料夾中：

![][1]

如果可以將資料置入 JSON 檔案，您可以利用您的資料覆寫現有的檔案，然後執行應用程式來建立和載入索引。 將資料分散到多個檔案有助於示範批次上傳作業。

其他載入資料的方法，包括使用索引子 (需要 Azure DocumentDB 資料來源或 Azure SQL Database 資料來源)。 示範如何載入資料的其他方式的範例程式碼，請參閱 [Azure 搜尋服務視訊和教學課程清單](search-video-demo-tutorial-list.md) MSDN 上。

### 編輯查詢

內建於方案的預設查詢會參考來自內建資料檔的欄位和結構。 一旦您已覆寫資料檔案來使用您的資料，就可以註解化查詢程式碼，或修改它以使用來自您的結構描述的欄位。 如需搜尋查詢語法的詳細資訊，請參閱 [搜尋文件](https://msdn.microsoft.com/library/azure/dn798927.aspx)。

### 建置並執行應用程式

按 **F5** 以執行應用程式。 如同之前，您應該會看到訊息，指出已建立、已載入和可查詢索引。

您現在具有可操作的索引，可以用來做為進一步調查的基礎。

此時，您可能想要切換至 [Fiddler](search-fiddler.md) 或 [Chrome Postman](search-chrome-postman.md) 來執行查詢，修改任何範例應用程式，以便使用您的搜尋服務和索引，或加入自訂程式碼提供資料視覺效果。

## 新增評分設定檔

我們建議您試驗 [評分設定檔](search-get-started-scoring-profiles.md) 透過入口網站或透過程式碼。 計分設定檔可提升特定欄位中找到的搜尋詞彙的重要性。 比方說，如果搜尋詞彙為城市名稱，您將預期在 [城市] 欄位中具有 *Seattle* 的文件，在結果中出現的位置高於在 [說明] 欄位中具有 *Seattle* 的文件。

加入計分設定檔會變更索引；每當修改結構描述，您將需要重建並重新載入索引。 基於這個原因，請考慮將計分設定檔的程式碼區段加入至您的原型 (或修改計分設定檔範例，以使用您的編製索引程式碼)。

請參閱 [新增評分設定檔](https://msdn.microsoft.com/library/dn798928.aspx) 上評分設定檔的參考文件。

## 新增建議

建議指的是根據使用者的文字輸入規劃可能搜尋詞彙之清單的熱門搜尋功能 (輸入"wea" 可提示 "weather"’、"weather channel"、"weather underground" 等等的自動完成搜尋詞彙的清單)。

若要新增建議，請將一個區段新增至索引結構描述，指定哪些欄位用來建置自動完成或自動提示的查詢。 包含名稱或較短字串 (沒有重複值) 的欄位通常是最好的選擇。 請參閱 [Create Index](https://msdn.microsoft.com/library/dn798928.aspx) 如需詳細資訊。

## 嘗試語言分析器

語言分析器提供語言規則，用於區分必要與非必要的字、字根形式，甚至同義字。 根據預設，Azure 搜尋服務使用英文版的 Lucene 語言分析程式。 您可以在特定欄位上指定不同分析器做為索引屬性，如此可讓您建置結構描述和文件，其中包含使用不同分析器的欄位 (例如，多語系應用程式可能會在相同文件中結合並排的法文和英文欄位)。 請參閱 [語言支援](https://msdn.microsoft.com/library/dn879793.aspx) 如需詳細資訊。

## 後續步驟

在先前章節中，您可以修改索引，將更多的功能加入至您的原型。 此時，您的索引變更大致完成 (我們並未涵蓋啟用 CORS，這是唯一剩下您可以進行的結構描述變更)。

進一步建立原型現在將可能在兩個不同方向引導您：在外專注於 UI，或許加入多面向導覽或其他縮小搜尋的篩選條件，或是進一步探索方案的資料同步處理方面。 許多方案都具有易變資料。 對許多開發人員而言，一旦基本搜尋行為通過驗證，同步處理交易式資料庫系統與 Azure 搜尋服務索引之間的資料更新，就是下一個優先處理事項。

請造訪下列連結以深入了解：

- [使用 Azure 搜尋服務的開發專案的一般工作流程](search-workflow.md)

- [Azure 搜尋服務索引子自訂](search-indexers-customization.md)

- [Azure 搜尋服務中的多面向導覽](search-faceted-navigation.md)

- [Azure 搜尋服務中的分頁搜尋結果](search-pagination-page-layout.md)




[1]: ./media/search-build-prototype/azsearch-datafiles.png 


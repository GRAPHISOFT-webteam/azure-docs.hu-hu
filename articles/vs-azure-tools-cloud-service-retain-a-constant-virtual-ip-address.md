<properties
   pageTitle="如何保持雲端服務的固定虛擬 IP 位址 | Microsoft Azure"
   description="了解如何確保 Azure 雲端服務的虛擬 IP 位址 (VIP) 不會變更。"
   services="visual-studio-online"
   documentationCenter="na"
   authors="TomArcher"
   manager="douge"
   editor="" />
<tags
   ms.service="multiple"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="multiple"
   ms.date="09/08/2015"
   ms.author="tarcher" />


# 如何保持雲端服務的固定虛擬 IP 位址

當您更新裝載於 Azure 中的雲端服務時，您可能需要確保服務的虛擬 IP 位址 (VIP) 不會變更。 許多網域管理服務都使用網域名稱系統 (DNS) 註冊網域名稱。 DNS 只有在 VIP 保持不變時才能運作。 您可以使用 Azure 工具中的 [發佈精靈]**** 確保雲端服務的 VIP 不會在您更新它時變更。 如需如何使用雲端服務的 DNS 網域管理的詳細資訊，請參閱 [設定 Azure 雲端服務的自訂網域名稱](cloud-services-custom-domain-name.md)。

## 發佈雲端服務而不變更其 VIP

當您第一次將雲端服務的 VIP 部署至特定環境 (例如生產環境) 的 Azure 中，會配置雲端服務的 VIP。 除非您明確刪除部署或由部署更新程序隱含地將其刪除，否則 VIP 不會變更。 若要保留 VIP，您不能刪除您的部署，且您必須要確定 Visual Studio 不會自動刪除您的部署。 您可以藉由在 [發佈精靈]**** 中指定部署設定來控制行為，該精靈可支援多種部署選項。 您可以指定全新部署或更新部署，可以是累加或同時的，且這兩種更新部署都會保留 VIP。 如需部署這些不同類型的定義，請參閱 [發行 Azure 應用程式精靈](vs-azure-tools-publish-azure-application-wizard.md)。 此外，您可以在發生錯誤時，控制是否要刪除先前的雲端服務部署。 如果您沒有正確設定該選項，VIP 可能會意外變更。

### 更新雲端服務而不變更其 VIP

1. 在您已至少部署您的雲端服務一次之後，開啟 Azure 專案節點的捷徑功能表，並按一下 [發佈]****。 [發佈 Azure 應用程式]**** 精靈隨即出現。

1. 在訂用帳戶清單中，選擇您要部署的目標訂用帳戶，然後選擇 [下一步]**** 按鈕。 精靈的 [設定]**** 頁面隨即出現。

1. 在 [一般設定]**** 索引標籤上，確認您部署的目標雲端服務名稱、**環境**、**組建組態**和**服務組態**全都正確無誤。

1. 在 [進階設定]**** 索引標籤上，確認儲存體帳戶和部署標籤都正確無誤，已清除 [失敗時刪除部署]**** 核取方塊，而且已選取 [部署]**** 更新核取方塊。 藉由選取 [部署]**** 更新核取方塊，您可以確定不會刪除您的部署，且 VIP 不會在重新發佈應用程式時遺失。 藉由清除 [失敗時刪除部署]**** 核取方塊，您可以確定在部署期間發生錯誤時，VIP 不會遺失。

1. 若要進一步指定您希望更新角色的方式，請選擇 [  **設定** 連結 **部署更新** ] 方塊中，然後選擇 [累加式更新或在同時更新選項 **部署更新** 設定] 對話方塊。 如果您選擇累加更新，每個執行個體都會逐一更新，讓應用程式隨時可使用。 如果您選擇同時更新，會同時更新所有的執行個體。 同時更新較為快速，但是您的服務可能無法在更新過程中使用。

1. 如果您滿意您的設定，請選擇 [下一步]**** 按鈕。

1. 在精靈的 [摘要]**** 頁面上，請確認您的設定，然後選擇 [發佈]**** 按鈕。
  >[AZURE.WARNING] 如果部署失敗，您應該找出失敗原因並立即重新部署，以避免讓您的雲端服務保持在損毀狀態。

## 後續步驟

若要了解發佈至 Azure 從 Visual Studio，請參閱 [發行 Azure 應用程式精靈](vs-azure-tools-publish-azure-application-wizard.md)。






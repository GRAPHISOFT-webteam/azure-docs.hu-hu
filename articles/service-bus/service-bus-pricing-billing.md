<properties 
   pageTitle="服務匯流排定價與計費 | Microsoft Azure"
   description="服務匯流排定價結構的概觀。"
   services="service-bus"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="tysonn" />
<tags 
   ms.service="service-bus"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/10/2015"
   ms.author="sethm" />


# 服務匯流排定價與計費

服務匯流排提供了基本、 標準和 [高階](service-bus-premium-messaging.md) 層。 您可以選擇在建立時，每個服務匯流排服務命名空間的服務層，此層級選擇套用至所有佇列、 主題/訂閱、 轉送和事件中心的命名空間內建立的。
>[AZURE.NOTE] 如需目前服務匯流排定價資訊，請參閱 [服務匯流排定價常見問題集](service-bus-pricing-faq.md)。

服務匯流排會在佇列和主題/訂用帳戶中使用下列兩種計量：

1. **傳訊作業**：定義為針對佇列或主題/訂用帳戶服務端點的 API 呼叫。 這個計量將取代送出或收到的訊息數，成為佇列和主題/訂用帳戶中可計費使用量的主要單位。

2. **代理連線**：定義為在指定的一小時取樣期間，針對佇列、主題/訂用帳戶或事件中樞開啟的持續連線尖峰數量。 這個計量只會套用至標準層，您可以在其中開啟其他連線 (之前的連線限制為每個佇列/主題/訂用帳戶 100 個)，支付每個連線的額定費用。

**標準**層為搭配佇列和主題/訂用帳戶執行的作業引進了漸進式定價，使得以量計價型折扣在最高使用量層級上可高達 80%。 另外還有每個月 $10 美元的標準層基本費用，讓您每個月執行最多 1,250 萬個作業，且不需額外費用。

**高階**層可讓您在 CPU 和記憶體層隔離資源，讓每個客戶工作負載能獨立執行。 此資源容器稱為「傳訊單位」**。 每個進階命名空間都會被配置至少一個傳訊單位。 您可以為每個服務匯流排進階命名空間購買 1、2 或 4 個傳訊單位。 單一工作負載或實體可以跨越多個傳訊單位，而傳訊單位數目可以隨意變更，雖然計費是依 24 小時或每日費率收費。 結果是您的服務匯流排方案的效能可預測並可重複。 此效能不僅更可預測並可取得，而且還更快速。 Azure 服務匯流排高階層的傳訊作業，是以 Azure 事件中樞中引進的儲存引擎為建置基礎。 使用進階訊息，尖峰效能的速度比標準層級的速度快很多。

請注意，標準層的基本費用只會針對每個 Azure 訂用帳戶每個月收費一次。 這表示當您建立單一標準層或高階層的服務匯流排命名空間後，將能在同一 Azure 訂用帳戶下，盡情建立許多額外標準層或高階層命名空間，而且不會產生額外的基本費用。

所有在 2014 年 11 月 1 日之前建立的現有服務匯流排命名空間，都會自動放入標準層。 這可確保您能繼續存取服務匯流排目前提供的所有功能。 接著，您可以使用 [Azure 傳統入口網站 []][] 降級為基本的層級，如有需要。

下表摘要說明基本層和標準層/高階層之間的功能差異。

| 功能| 基本| 標準/高階|
|---|---|---|
| 事件中樞| 是| 是|
| 佇列| 是| 是|
| 排定的訊息| 是| 是|
| 主題/訂用帳戶| 否| 是|
| 轉送| 否| 是|
| 交易| 否| 是|
| 刪除重複| 否| 是|
| 工作階段| 否| 是|
| 大型訊息| 否| 是|
| ForwardTo| 否| 是|
| SendVia| 否| 是|
| 代理連線 (已隨附)| 每個服務匯流排命名空間 100 個| 每個 Azure 訂用帳戶 1,000 個|
| 代理連線 (允許超額部分)| 否| 是 (可計費)|

## 傳訊作業

在新定價模型中，佇列和主題/訂用帳戶的計費方式正在改變。 這些實體會從每則訊息計費轉換成每個作業計費。 「作業」指的是針對佇列或主題/訂用帳戶服務端點所建立的任何 API 呼叫。 這包括管理、傳送/接收和工作階段狀態的作業。

| 作業類型| 說明|
|---|---|
| 管理| 對佇列或主題/訂用帳戶執行的建立、讀取、更新、刪除 (CRUD)。|
| 訊息| 用佇列或主題/訂用帳戶傳送和接收訊息。|
| 工作階段狀態| 取得或設定佇列或主題/訂用帳戶上的工作階段狀態。|

下列價格自 2014 年 11 月 1 日起生效：

| 基本| 成本|
|---|---|
| Operations| 每百萬個作業 $0.05 美元|

| 標準| 成本|
|---|---|
| 基本費用| $10 美元/月|
| 前 1,250 萬個作業/月| 已包括|
| 1,250 萬到 1 億個作業/月| 每百萬個作業 $0.80 美元|
| 1 億到 25 億個作業/月| 每百萬個作業 $0.50 美元|
| 超過 25 億個作業/月| 每百萬個作業 $0.20 美元|

>[AZURE.NOTE] 高階層目前為預覽版，且下列價格會反映 50% 的預覽版折扣。

| 高級| 成本|
|---|---|
| 每日| 每個訊息單位 $11.13 美元固定費率|

## 代理連線

*代理連線*內含的客戶使用量模式，牽涉到針對佇列、主題/訂用帳戶或事件中樞而「持續連線」的大量傳送者/接收者。 持續連線的傳送者/接收者是指使用 AMQP 或 HTTP 進行連線，且接收逾時為非零值 (例如 HTTP 長時間輪詢) 的對象。 具有立即逾時的 HTTP 傳送者和接收者並不會產生代理連線。

先前的佇列和主題/訂用帳戶具有每個 URL 100 個並行連線的限制。 目前的計費機制為佇列和主題/訂用帳戶移除了每個 URL 的限制，並在服務匯流排命名空間和 Azure 訂用帳戶層級上，為代理連線導入了配額和計量。

基本層包含 (並嚴格限制為) 每個服務匯流排命名空間 100 個代理連線。 在基本層中，超過此數字的連線將會被拒絕。 標準層會移除每個命名空間的限制，並計算 Azure 訂用帳戶上彙總的代理連線使用量。 在標準層中，每個 Azure 訂用帳戶可有 1,000 個代理連線，且不需額外費用 (除了基本費用外)。 在 Azure 訂用帳戶的標準層服務匯流排命名空間中，如果使用總數超過 1,000 個代理連線，則會依漸進方式計費，如下表所示。

| 代理連線 (標準層)| 成本|
|---|---|
| 前 1,000 個/月| 包含在基本費用內|
| 1,000-100,000 個/月| 每個連線 $0.03 美元/月|
| 100,000-500,000 個/月| 每個連線 $0.025 美元/月|
| 超過 500,000 個/月| 每個連線 $0.015 美元/月|

>[AZURE.NOTE] 標準傳訊層隨附 1,000 個代理連線 (包含在基本費用內)，而且可以在相關聯的 Azure 訂用帳戶內，讓所有佇列、主題/訂用帳戶和事件中樞共用。

>[AZURE.NOTE] 計費會依據並行連線的尖峰數量，並以每個月 744 小時為基礎，按照每小時的比例計算。

|「 高階 」 層
|---|
|在 「 高階 」 層中則不需計費代理的連線。 |

如需代理連線的詳細資訊，請參閱 [常見問題集](#FAQ) 本主題稍後的章節。

## 轉送

只能在標準層命名空間中使用轉送。 否則轉送的定價和連線配額會保持不變。 這表示轉送將繼續按訊息數目 (而非作業數) 和轉送時數計費。

| 轉送定價| 成本|
|---|---|
| 轉送時數| 每 100 個轉送小時 $0.10 美元|
| 訊息| 每 10,000 則訊息 $0.01 美元|

## 常見問題集

### 如何計算轉送時數計量？

See [this topic](service-bus-pricing-faq.md#How-is-the-Relay-Hours-meter-calculated?).

### 什麼是代理連線，以及如何支付它們的費用？

代理連線可定義為下列其中一個動作：

1. 從用戶端到服務匯流排主題/訂用帳戶、佇列或事件中樞的 AMQP 連線。

2. 從服務匯流排主題或佇列接收訊息的 HTTP 呼叫，且接收的逾時值大於零。

服務匯流排的並行代理連線尖峰數量，如果超過隨附數量 (標準層中為 1,000 個)，就會收取費用。 尖峰的測量方式會以每小時為基礎，除以每個月的 744 小時來依比例計算，並依據每個月的計費期間來加總。 隨附的數量 (每個月 1,000 個代理連線) 會根據依比例計算的每小時尖峰的總和，在計費期間快結束時加以套用。

例如：

1. 10,000 台裝置均透過單一 AMQP 連線進行連線，並接收來自服務匯流排主題的命令。 裝置將遙測事件傳送到事件中樞。 如果所有裝置每天都連線 12 小時，則除了其他服務匯流排的任何主題費用外，還會有以下連線費用：10,000 個連線 * 12 小時 * 31 天 / 744 = 5,000 個代理連線。 超過每月 1,000 個代理連線的額度後，就會以每個代理連線 $0.03 美元的費率，對 4,000 個代理連線收費，總共 $120 美元。

2. 10,000 台裝置透過 HTTP 從服務匯流排佇列接收訊息，並指定非零的逾時值。 如果所有裝置每天都連線 12 小時，則除了其他服務匯流排的任何費用外，您還會看到以下連線費用：10,000 個 HTTP 接收連線 * 每天 12 小時 * 31 天 / 744 = 5,000 個代理連線。

### 代理連線費用是否會套用到佇列和主題/訂用帳戶？

是。 不論傳送系統或裝置的數目多寡，使用 HTTP 來傳送事件不需要支付連線費用。 使用逾時大於零的 HTTP 來接收事件，有時也稱為「長時間輪詢」，會產生代理連線的費用。 AMQP 連線均會產生代理連線費用，不論連線是用於傳送或接收皆然。 請注意，在基本層命名空間中，可以免費使用 100 個代理連線。 這也是 Azure 訂用帳戶允許的代理連線數目上限。 在 Azure 訂用帳戶中，所有標準層命名空間內的前 1,000 個代理連線，除了基本費用外，均不需額外費用。 因為這些額度便足以涵蓋許多服務對服務的傳訊案例，通常只在您打算使用 AMQP 或 HTTP 的長時間輪詢加上大量用戶端時，才可能會有相應的代理連線費用。例如，想要達到更有效率的事件資料流，或啟用與許多裝置或應用程式執行個體間的雙向通訊。

## 另請參閱

[服務匯流排定價常見問題集](service-bus-pricing-faq.md)


[azure classic portal]: http://manage.windowsazure.com 


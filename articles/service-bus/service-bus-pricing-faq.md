<properties 
   pageTitle="服務匯流排價格常見問題集 | Microsoft Azure"
   description="回答一些有關服務匯流排價格結構的常見問題。"
   services="service-bus"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="tysonn" />
<tags 
   ms.service="service-bus"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/09/2015"
   ms.author="sethm" />


# 服務匯流排價格常見問題集

本節提供服務匯流排價格結構的一些常見問題解答。 您也可以造訪 [Azure 支援常見問題集](http://go.microsoft.com/fwlink/?LinkID=185083) 一般的 Microsoft azure 定價資訊。 完成服務匯流排定價的詳細資訊，請參閱 [定價詳細資料的服務匯流排](http://azure.microsoft.com/pricing/details/service-bus/)。
>[AZURE.NOTE] 事件中心的定價結構述 [事件中樞可用性和支援常見問題集](event-hubs-availability-and-support-faq.md) 主題的詳細資訊，在 [事件中樞定價](http://azure.microsoft.com/pricing/details/event-hubs/) 主題。

- [您該如何收費服務匯流排?](#how-do-you-charge-for-service-bus)
- [哪些服務匯流排會受限於資料傳輸? 不是什麼?]() #what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not
- [到底是什麼服務匯流排 「 轉送 」?](#what-exactly-is-a-service-bus-quotrelayquot)
- [轉送小時 」 計費表計算方式為何?](#how-is-the-relay-hours-meter-calculated)
- [如果我有一個以上的接聽程式連接到指定的轉送?](#what-if-i-have-more-than-one-listener-connected-to-a-given-relay)
- [針對轉送如何計算訊息 」 計費表?](#how-is-the-messages-meter-calculated-for-relays)
- [服務匯流排會針對儲存體收費?](#does-service-bus-charge-for-storage)
- [服務匯流排是否有任何使用量配額?](#does-service-bus-have-any-usage-quotas)

## 服務匯流排的收費方式為何？

完成服務匯流排定價的詳細資訊，請參閱 [服務匯流排定價和計費](https://msdn.microsoft.com/library/dn831889.aspx) 和 [服務匯流排定價詳細資料](http://azure.microsoft.com/pricing/details/service-bus/)。 除了註明的價格，您還需支付您的應用程式佈建所在資料中心外部的輸出相關資料傳輸費用。 您可以找到更多詳細資料中的 [哪些服務匯流排會受限於資料傳輸? 不是什麼?](#what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not) 一節。

## 何種服務匯流排用法需支付資料傳輸費用？何種不需？

指定的 Azure 區域內的任何資料傳輸都是免費提供。 區域外部的資料傳輸需支付輸出費用，其費率為每 GB 0.15 美元 (從北美洲和歐洲地區) 和每 GB 0.20 美元 (從亞太地區)。 任何輸入資料傳輸都是免費提供。

## 到底什麼是服務匯流排「轉送」？

轉送是可在用戶端與 Web 服務之間轉送訊息的服務匯流排實體。 轉送可為服務提供持續、可探索的服務匯流排位址、與防火牆 /NAT 周遊功能的可靠連線，以及其他功能，例如自動負載平衡。 當已啟用轉送的 WCF 服務或「轉送接聽程式」第一次連接到指定的服務匯流排位址 (命名空間 URL) 時，轉送就會隱含具現化並於該位址開放。 應用程式會使用服務匯流排 .NET Managed API 來建立轉送接聽程式，而該 API 可提供標準 WCF 繫結的特殊具轉送功能版本。

## 如何計算轉送時數計量？

轉送時數的計費方式為在指定的計費期間內，每個服務匯流排轉送為「開放」狀態的累計時間量。 當已啟用轉送的 WCF 服務或「轉送接聽程式」第一次連接到指定的服務匯流排位址 (服務命名空間 URL) 時，轉送就會隱含具現化並於該位址開放。 只有在最後一個接聽程式中斷連接其位址時，才會關閉轉送。 因此，為了方便計費，從第一個轉送接聽程式連接轉送的服務匯流排位址，到最後一個轉送接聽程式中斷連接的這段時間，該轉送會被視為「開放」。 換句話說，每當一或多個轉送接聽程式連接到轉送的服務匯流排位址時，該轉送就會被視為「開放」。

## 如果我有一個以上的接聽程式連接到指定的轉送，該怎麼辦？

在某些情況下，服務匯流排中的單一轉送可能有多個已連接的接聽程式。 這可能會發生負載平衡服務使用 **netTCPRelay** 或 **HttpRelay** WCF 繫結，或使用的廣播的事件接聽 **netEventRelay** WCF 繫結。 至少有一個轉送接聽程式連接到服務匯流排中的轉送時，即會被視為「開放式」轉送。 將其他接聽程式加入至開放式轉送並不會變更該轉送的狀態，以便計費。 連接到轉送的轉送傳送者 (叫用或傳送訊息至轉送的用戶端) 數目也不會影響轉送時數的計算。

## 如何針對轉送計算訊息計量？

一般而言，對代理實體 (佇列、主題和訂用帳戶) 使用上述相同方法的轉送會計算計費訊息。 但是，請注意以下幾個差異：

1. 將訊息傳送至服務匯流排轉送會被視為「完全直達」傳送至接收訊息的轉送接聽程式，而不是傳送至服務匯流排轉送並接著傳遞至轉送接聽程式。因此，對於轉送接聽程式的要求-回覆模式服務叫用 (最多 64 KB) 將會產生兩則計費訊息︰一則是要求的計費訊息，一則是回應的計費訊息 (假設回應也是 < = 64 KB)。這與使用佇列在用戶端與服務之間居中協調不同。在後面的情況中，相同的要求-回覆模式需要將要求傳送至佇列，接著清除佇列/從佇列傳遞至服務，然後接著將回應傳送至另一個佇列，以及清除佇列/從該佇列傳遞至用戶端。始終使用相同的 (< = 64 KB) 大小假設，居中協調的佇列模式會因此產生四則計費訊息，這是使用轉送實作相同模式所需計費數目的兩倍。當然，使用佇列來達成此模式有許多優點，例如，持久性和負載調節。這些優點可合理解釋額外的費用。

2. 使用開啟的轉送 **netTCPRelay** WCF 繫結處理的訊息，不是個別訊息，但資料流經系統的資料流。 換句話說，只有傳送者和接聽程式能夠看見使用此繫結傳送/接收之個別訊息的框架。 因此，對於使用 **netTCPRelay** 繫結的轉送，所有資料都會被視為資料流，以便計算計費訊息。 在此情況下，服務匯流排會計算每隔 5 分鐘透過每個個別轉送傳送或接收的資料總量並將該總量除以 64 KB，以便判斷該期間內有問題之轉送的計費訊息數目。

## 服務匯流排是否會收取儲存體費用？

不會，服務匯流排不會收取儲存體費用。 不過，有配額會限制每個佇列/主題可保存的資料數量上限。 請參閱下一個常見問題。

## 服務匯流排是否有任何使用量配額？

根據預設，對於所有雲端服務，Microsoft 會設定針對所有客戶的訂用帳戶計算的彙總每月使用量配額。 因為我們了解您的需求可能超過這些限制，請隨時連絡客戶服務部門，讓我們能夠了解您的需求並適當地調整這些限制。 服務匯流排的彙總使用量配額如下：

- 50 億則訊息

- 2 百萬個轉送小時

雖然我們有權停用在指定的月份內超出其使用量配額的客戶帳戶，但我們將提供電子郵件通知並且在採取任何動作之前多次嘗試連絡客戶。 超出這些配額的客戶仍需負責支付超出配額的費用。

如同 Azure 上的其他服務，服務匯流排會強制執行一組特定的配額，以確保公平的資源使用量。 以下是此服務會強制執行的使用量配額：

- **佇列/主題大小** – 您會在建立佇列或主題時指定佇列或主題大小上限。 此配額的值可以是 1、2、3、4 或 5 GB。 如果達到大小上限，其他內送訊息將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。

- **並行連線數目**
    - **佇列/主題/訂用帳戶** -佇列/主題/訂用帳戶上並行 TCP 連線數目的限制為 100。 如果達到這個配額，其他連接的後續要求將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。 對於每個訊息工廠而言，如果該訊息工廠所建立的任何用戶端有作用中的作業擱置，或在少於 60 秒之前完成作業，則服務匯流排會維持一個 TCP 連線。 REST 作業不會計入並行 TCP 連線內。

- **轉送上的並行接聽程式數目** – 的 **netTcpRelay** 和 **netHttpRelay * * 上轉送接聽程式是限制為 25 (1 * * {1>netoneway** 轉送)。

- **每個命名空間的並行轉送接聽程式數目** – 服務匯流排會強制執行每個服務命名空間 2000 個並行轉送接聽程式的限制。 如果達到這個配額，開啟其他轉送接聽程式的後續要求將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。

- **每個服務命名空間的主題/佇列數目** – 服務命名空間上的主題/佇列 (持久型儲存體支援的實體) 數目上限為 10,000。 如果達到此配額，在服務命名空間上建立新主題/佇列的後續要求將會遭到拒絕。 在此情況下， [Azure 傳統入口網站 []][] 會顯示錯誤訊息或呼叫的用戶端程式碼將會收到例外狀況，根據是否嘗試建立了透過入口網站，或用戶端程式碼中。

- **訊息大小配額**
    - **佇列/主題/訂用帳戶**
        - **訊息大小** – 每個訊息的總大小 256KB，包括訊息標頭的限制。
        - **訊息標頭大小** – 每個訊息標頭是限制為 64 KB。

    - **NetOneway 和 NetEvent 轉送** - 每則訊息的大小總計限制為 64KB，包含訊息標頭。
    - **Http 和 NetTcp 轉送** – 服務匯流排不會強制執行這些訊息大小的上限。

    超出這些大小配額的訊息將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。

- **每個主題的訂用帳戶數目** – 每個主題的訂用帳戶數目上限為 2,000。 如果達到此配額，將會拒絕建立主題的其他訂用帳戶的後續要求。 在此情況下， [Azure 傳統入口網站 []][] 會顯示錯誤訊息或呼叫的用戶端程式碼將會收到例外狀況，根據是否嘗試建立了透過入口網站，或用戶端程式碼中。

- **每個主題的 SQL 篩選器數目** – 每個主題的 SQL 篩選器數目上限為 2,000。 如果達到這個配額，則在主題上建立其他篩選器的後續要求都會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。

- **每個主題的相互關聯篩選器數目** – 每個主題的相互關聯篩選器數目上限為 100,000。 如果達到這個配額，則在主題上建立其他篩選器的後續要求都會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。

如需配額的詳細資訊，請參閱 [服務匯流排配額](service-bus-quotas.md)。

## 後續步驟

若要深入了解服務匯流排訊息，請參閱下列主題。

- [簡介 Azure 服務匯流排高階訊息 (部落格文章)](http://azure.microsoft.com/blog/introducing-azure-service-bus-premium-messaging/)
- [簡介 Azure 服務匯流排高階訊息 (Channel9)](https://channel9.msdn.com/Blogs/Subscribe/Introducing-Azure-Service-Bus-Premium-Messaging)
- [服務匯流排訊息概觀](service-bus-messaging-overview.md)
- [Azure 服務匯流排架構概觀](fundamentals-service-bus-hybrid-solutions.md)
- [如何使用服務匯流排佇列](service-bus-dotnet-how-to-use-queues.md)


[azure classic portal]: http://manage.windowsazure.com 

